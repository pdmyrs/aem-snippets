Versioned clientlibs uses Sling Rewriter to rewrite the client libraries generated by aem and append a unique MD5 value at end of the client library url.

After modification to client library, a new MD5 value is generated and appended to client library url this allows it to recache at client side. 

For example:- 

* Normal AEM Client Library URL:- http://localhost:4502/etc.clientlibs/weretail/clientlibs/clientlib-base.js

* Versioned Client Library URL:- http://localhost:4502/etc.clientlibs/weretail/clientlibs/clientlib-base.f2e70583096c942b4b71351437bce842.js

Whenever there is a change in the client libs it will create a new version of the client libs, but the problem is the pages which are already cached in the dispatcher before a new version of the clientlibs still refer the previous version. We need to clear the dispatcher cache whenever there is a change in client libs


How to enable versioned clientLibs:

1. Create "/apps/<project>/config/rewriter[sling:Folder]"

2. Create "/apps//config/rewriter/versioned-clientlibs.xml" file and copy below

 
```xml
<?xml version="1.0" encoding="UTF-8"?>

<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"

    jcr:primaryType="sling:Folder"

    contentTypes="[text/html]"

    enabled="{Boolean}true"

    generatorType="htmlparser"

    order="{Long}1"

    serializerType="htmlwriter"

    transformerTypes="[linkchecker,versioned-clientlibs]"/>
```
               
3. Copy the default node from "/libs/cq/config/rewriter/default" to "/apps/thf/config/rewriter/default"

add value "versioned-clientlibs" to property "transformerTypes".

 
4. Now to verify above configuration System/console/status/sling-rewriter `/apps/<project>/config/rewriter/default should` be present

 

*RESTART THE AEM INSTANCE TO SEE ABOVE SLING-REWRITER CONFIGURATIONS*

 

Dispatcher level changes:

 

Add below in /etc/httpd/conf/extra/ssl.conf

```
SetEnvIf Request_URI "(\.min)?\.[a-f0-9]+\.js" long_expires=true
SetEnvIf Request_URI "(\.min)?\.[a-f0-9]+\.css" long_expires=true
Header set Cache-Control max-age=2592000 env=long_expires
```
 


